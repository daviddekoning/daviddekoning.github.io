<!DOCTYPE html>
<html>
<head>
  <title>Transit Map Benchmarking</title>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet" type="text/css"/>
  <style type="text/css">
    #basemapslidercontainer {
      position: absolute;
      top: 50px;
      right: 10px;
      z-index: 1000;
    }

    #basemapslider{
      font-size:62.5%;
      margin: 14px;
      height: 125px;
      width:7px;
    }

    div.map{
       width: 800px;
       height: 400px;
    }
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
  <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js">
  </script><script src="L.Map.Sync.js"></script>
  <script>
    $(document).ready(function () {
      $("#basemapslider").slider({
            animate: true,
            value: 1,
            orientation: "vertical",
            min: 0,
            max: 1,
            step: 0.1,
            slide: function (event, ui) {
                mytile.setOpacity(ui.value);
            }
       });

        $('#basemapslider').mousedown(function(){
          map.dragging.disable();
        })

        $('#basemapslider').mouseup(function(){
          map.dragging.enable();
        })

      var map_data = [
		{
			name: "Toronto",
			centre: [43.655169, -79.387754],
			id: 'toronto'
		},
		{
			name: "Montreal",
			centre: [45.500329, -73.569051],
			id: 'montreal'
		},
		{
			name: "New York",
			centre: [40.734736, -73.990508],
			id: 'newyork'
		},
		{
			name: "Paris",
			centre: [48.8567647088, 2.33412313576],
			id: 'paris'
		},
		{
			name: "London",
			centre: [51.510949, -0.128503],
			id: 'london'
		},
		{
			name: "Seoul",
			centre: [37.551409, 126.986106],
			id: 'seoul'
		}
	  ];
	  maps = [];
	  
	  map_data.forEach( function(city) {
		var map = L.map(city['id']).setView( city['centre'], 13);
		
		var mytile = L.tileLayer('../webmaps/'.concat(city['id'],'/{z}/{x}/{y}.png'), {
			minZoom: 11,
			maxZoom: 14,
			tms: false,
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, National Census Data'
		}).addTo(map);
		
		L.control.layers({ [city['id']]: mytile}).addTo(map);
		maps.push(map);
	  });
	  
	  maps.forEach( function( map1 ) {
		maps.forEach( function( map2 ) {
			if ( map1 != map2 ) {
				map1.sync(map2);
			}
		} )
	  } );
	  
	  
      /*var map_toronto = L.map('toronto').setView([43.655169, -79.387754], 13);

      var mytile = L.tileLayer('../webmaps/toronto/{z}/{x}/{y}.png', {
        minZoom:11,
		maxZoom: 14,
        tms: false,
        attribution: 'Generated by QTiles'
      }).addTo(map_toronto);

      L.control.layers({'toronto':mytile}).addTo(map_toronto);

      var map_montreal = L.map('montreal').setView([45.500329, -73.569051], 13);

      var mytile =L.tileLayer('../webmaps/montreal/{z}/{x}/{y}.png', {
        minZoom:11,
		maxZoom: 14,
        tms: false,
        attribution: 'Generated by QTiles'
      }).addTo(map_montreal);

      L.control.layers({'montreal': mytile}).addTo(map_montreal); */
	  
    })
  </script>
</head>
<body>
<table align="center">
<tr><td>
  <div id="toronto" class="map">
    <div id="basemapslidercontainer">
      <div id="basemapslider">
      </div>
    </div>
  </div>
  </td>
  <td>
  <div id="montreal" class="map">
    <div id="basemapslidercontainer">
      <div id="basemapslider">
      </div>
    </div>
  </div>
 </td></tr>
 <tr><td>
  <div id="paris" class="map">
    <div id="basemapslidercontainer">
      <div id="basemapslider">
      </div>
    </div>
  </div>
  </td>
  <td>
  <div id="newyork" class="map">
    <div id="basemapslidercontainer">
      <div id="basemapslider">
      </div>
    </div>
  </div>
 </td></tr>
 <tr><td>
  <div id="london" class="map">
    <div id="basemapslidercontainer">
      <div id="basemapslider">
      </div>
    </div>
  </div>
  </td>
  <td>
  <div id="seoul" class="map">
    <div id="basemapslidercontainer">
      <div id="basemapslider">
      </div>
    </div>
  </div>
 </td></tr>
 </table>
</body>
</html>

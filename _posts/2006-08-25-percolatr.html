---           
layout: post
title: percolatr
date: 2006-08-25 16:11:00 UTC
updated: 2006-10-11 21:27:11 UTC
comments: false
categories: 
---
 
slow-drip photographic goodness<br /><br />If you keep an eye on my flickr page, you'll know that I tend to add a whole bunch of pictures all at once.  I don't really like doing that, because it means that you get overwhelmed with tons of pictures at irregular intervals and don't have the time to fully appreciate the splendour and beauty of each one.  (Q: is dave full of himself?)<br /><br />Anyways, I thought it would be nice to set up a queue of pictures and write a program to upload them once a day.  At first I thought I'd write a huge program that would store pictures in a queue and let me give them tags and names and descriptions, and then I'd write all the code that talks to flickr, and so on.  However, all those things have been written by other people, so my motivation to write them from scratch was approximately nil.<br /><br />Then I realized that the only thing I really wanted was the queue.  If I could somehow get the computer to pull one picture from a queue each morning and put it in my way, then I could just upload it myself.  This, it turns out is much easier...<br /><br />I added two albums to iPhoto: "flickr queue" and "flickr".  Then I wrote a script that grabs the first image from the "flickr queue" albums, copies it to the desktop, does some processing to prep it for flickr and then moves the image from the "flickr queue" album to "flickr".  Then I told launchd to run the script every morning and I'm all set.  Everyday there will be one picture sitting on my desktop screaming to be uploaded!<br /><br />Here's the script, if you're interested:<br /><br /><pre><br />tell application "iPhoto"<br /> set queue to the album named "flickr queue"<br /> -- (count photos in queue) is equal to 1<br /> if (count photos in queue) is greater than 0 then<br />  set photo_of_the_day to the first photo in queue<br />  set path_of_the_day to the image path of photo_of_the_day as POSIX file as alias<br />  tell application "Finder" to set fresh_copy to duplicate path_of_the_day to the desktop<br /> else<br />  return<br /> end if<br /> <br /> add photo_of_the_day to the album named "flickr"<br /> remove photo_of_the_day from the album named "flickr queue"<br /> <br /> tell application "Image Events"<br />  launch<br />  set image_of_the_day to open (fresh_copy as string)<br />  scale image_of_the_day to size 1200<br />  match image_of_the_day to destination profile "sRGB Profile"<br />  save image_of_the_day<br /> end tell<br /> <br /> <br />end tell<br /></pre>